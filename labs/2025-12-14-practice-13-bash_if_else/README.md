# Практична робота 13

if else розгалуження

## Завдання:

### 1 Створити скрипт `check_arg.sh`, який:
- перевіряє, чи передано хоч один аргумент
- якщо так - виводить: `"Отримано аргумент: <значення>"`
- якщо ні - виводить: `"Аргумент не передано"`

`check_arg.sh`
```bash
if [ -z "$1" ]; then
    echo "Аргумент не передано"
else
    echo "Отримано аргумент: $1"
fi
```
---

### 2 Створити скрипт `check_num.sh`, який:
- запитує у користувача число
- перевіряє, чи число більше 100
- якщо більше - виводить `"Число велике"`
- якщо менше або дорівнює - `"Число невелике"`

`check_num.sh`
```bash
echo -n "Введи число: "
read num

if [ "$num" -gt 100 ]; then
    echo "Число велике"
else
    echo "Число невелике"
fi
```
---

### 3 Створити скрипт `compare.sh`, який:
- приймає два аргументи
- порівнює їх як числа
- виводить, який з них більший, або що вони рівні

`compare.sh`
```bash
if [ "$1" -gt "$2" ]; then
    echo "$1 більше"
elif [ "$2" -gt "$1" ]; then
    echo "$2 більше"
else
    echo "Числа рівні"
fi
```
---

### 4 Створити скрипт `filecheck.sh`, який:
- перевіряє, чи файл з назвою `$1` існує
- якщо існує - перевіряє, чи він порожній
- виводить одну з трьох фраз:
    - `"Файл не існує"`
    - `"Файл існує, але порожній"`
    - `"Файл існує і містить дані"`

`filecheck.sh`
```bash
if [ ! -f "$1" ]; then
    echo "Файл не існує"
elif [ ! -s "$1" ]; then
    echo "Файл існує, але порожній"
else
    echo "Файл існує і містить дані"
fi
```
---

### 5 Створити скрипт `login.sh`, який:
- запитує ім’я користувача
- якщо ім’я дорівнює `"admin"` - виводить `"Адміністратор увійшов"`
- якщо `"guest"` - `"Гість увійшов"`
- інакше - `"Невідомий користувач"`

`login.sh`
```bash
echo -n "Введи ім'я: "
read user

if [ "$user" = "admin" ]; then
    echo "Адміністратор увійшов"
elif [ "$user" = "guest" ]; then
    echo "Гість увійшов"
else
    echo "Невідомий користувач"
fi
```
---

### 6 Створити скрипт `passcheck.sh` (міні-симуляція входу):
- запитує пароль
- якщо пароль дорівнює `"1234"` - `"Доступ дозволено"`
- інакше - `"Неправильний пароль"`

`passcheck.sh`
```bash
echo -n "Введи пароль: "
read -s password
echo

if [ "$password" = "1234" ]; then
    echo "Доступ дозволено"
else
    echo "Неправильний пароль"
fi
```

[Демонстрація]()

---

## Висновок:
Умовні оператори в Bash застосовують у інфраструктурних і системних задачах, де скрипт повинен автоматично приймати рішення залежно від ситуації. 

Наприклад:

### Автоматизація розгортання у контейнерах:

- `Bash` у `Docker entrypoint` вирішує: 
    - якщо немає конфіг-файла створити, 
    - якщо БД не піднялась почекати, 
    - якщо перший запуск виконати міграції.

- Приклад логіки:
  ```bash
  if [ ! -f /app/config.yaml ]; then generate_config; fi
  ```

### Сетеві сценарії для адміністраторів:

- Скрипти, які логіняться на свічі та маршрутизатори, перевіряють стан портів, збирають таблиці маршрутизації, будують схеми зв'язків. Умови потрібні для гілок: 
    - якщо порт `down` виконати одну команду, 
    - якщо `up` іншу.

### Моніторинг та самовідновлення сервісів:

- Скрипти перевіряють, чи процес живий. Якщо ні, стартують його або шлють `alert`.
  ```bash
  if ! pgrep nginx; then systemctl restart nginx; fi
  ```

### Розгортання та керування віртуальними машинами:

- У `bash` сценаріях для `KVM`, `Proxmox` або `libvirt` перевіряють: 
    - чи існує диск, 
    - чи `VM` вже створена, 
    - чи піднята мережа, 
    - чи доступний `storage`. 
- На основі цього розгалужуємо: створити нову `VM` або просто запустити існуючу.

### `CI/CD` пайплайни:

- `Bash` визначає, що робити залежно від гілки, тега, результатів тестів. 
    - якщо `dev`, деплой на дев
    - якщо `main`, збірка релізу
    - якщо `tag`, завантаження артефакту

### Обробка логів та системних даних:

- Скрипти аналізують обсяг логів, стан диску, помилки у `syslog`. Якщо перевищено поріг, чистять або архівують.

### Пісочниці для тестування:

- Скрипти готують середовище:
    - якщо образ не завантажений, скачати
    - якщо мережа не створена, створити
    - якщо `VM` тесту не існує, підняти
- і лише після цього можна запускати тести.

---

Це невелика частина реальних сценаріїв, які показують, як умовні оператори дозволяють `Bash` скриптам адаптуватися до стану системи і виконувати різні дії залежно від обставин.